{"remainingRequest":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\src\\components\\messages\\CreateRoomView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\src\\components\\messages\\CreateRoomView.vue","mtime":1619908030888},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619908227131},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1619908227181},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1619908226782},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619908227131},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1619908281553}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdDcmVhdGVSb29tVmlldycsDQoNCiAgICBkYXRhOiAoKSA9PiAoew0KICAgICAgICBpc1ZhbGlkOiBmYWxzZSwNCg0KICAgICAgICBuYW1lOiAnJywNCiAgICAgICAgbmFtZVJ1bGVzOiBbDQogICAgICAgICAgICB2ID0+ICEhdiB8fCAnTmFtZSBpcyByZXF1aXJlZCcsDQogICAgICAgICAgICB2ID0+IHYubGVuZ3RoIDw9IDI1IHx8ICdOYW1lIG11c3QgYmUgbGVzcyB0aGFuIDI1IGNoYXJhY3RlcnMnLA0KICAgICAgICBdLA0KDQogICAgICAgIHBhcnRpY2lwYW50czogW10sDQogICAgICAgIHBhcnRpY2lwYW50c1J1bGVzOiBbDQogICAgICAgICAgICB2ID0+IHYubGVuZ3RoID4gMCB8fCAnWW91IG11c3QgaW5jbHVkZSBhdCBsZWFzdCBvbmUgcGFydGljaXBhbnQnDQogICAgICAgIF0sDQogICAgfSksDQoNCiAgICBjb21wdXRlZDogew0KICAgICAgICAuLi5tYXBHZXR0ZXJzKHsNCiAgICAgICAgICAgIHVzZXJJZDogJ2F1dGgvdXNlcklkJywNCiAgICAgICAgICAgIGF1dGhvcnM6ICdtZXNzYWdpbmcvYXV0aG9ycycsDQogICAgICAgIH0pLA0KDQogICAgICAgIG90aGVyQXV0aG9ycygpew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXV0aG9ycy5maWx0ZXIoYXV0aG9yID0+IGF1dGhvci5faWQgIT09IHRoaXMudXNlcklkKQ0KICAgICAgICB9LA0KDQogICAgICAgIGN1cnJlbnRBdXRob3IoKXsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dGhvcnMuZmlsdGVyKGF1dGhvciA9PiBhdXRob3IuX2lkID09PSB0aGlzLnVzZXJJZClbMF0NCiAgICAgICAgfSwNCiAgICB9LA0KDQogICAgY3JlYXRlZCgpew0KICAgICAgICB0aGlzLmxvYWREYXRhKCkNCiAgICB9LA0KDQogICAgYmVmb3JlRGVzdHJveSgpew0KICAgICAgICB0aGlzLmNsZWFyQXV0aG9ycw0KICAgIH0sDQoNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC4uLm1hcEFjdGlvbnMoew0KICAgICAgICAgICAgY2xlYXJBdXRob3JzOiAnbWVzc2FnaW5nL2NsZWFyQXV0aG9ycycsDQogICAgICAgICAgICBnZXRBdXRob3JzOiAnbWVzc2FnaW5nL2dldEF1dGhvcnMnLA0KICAgICAgICAgICAgY3JlYXRlUm9vbTogJ21lc3NhZ2luZy9jcmVhdGVSb29tJywNCiAgICAgICAgICAgIGpvaW5Sb29tOiAnbWVzc2FnaW5nL2pvaW5Sb29tJywNCiAgICAgICAgfSksDQoNCiAgICAgICAgcmVzZXRWYWx1ZXMoKXsNCiAgICAgICAgICAgIHRoaXMubmFtZSA9ICcnDQogICAgICAgICAgICB0aGlzLnBhcnRpY2lwYW50cyA9IFtdDQogICAgICAgIH0sDQoNCiAgICAgICAgYXN5bmMgbG9hZERhdGEoKXsNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QXV0aG9ycygpDQogICAgICAgIH0sDQoNCiAgICAgICAgYXN5bmMgdmFsaWRhdGVBbmRDcmVhdGVSb29tKCl7DQogICAgICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKXsNCg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGFydGljaXBhbnRzKQ0KICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Jvb20gPSBhd2FpdCB0aGlzLmNyZWF0ZVJvb20oew0KICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsDQogICAgICAgICAgICAgICAgICAgIGF1dGhvcnM6IFsgLi4udGhpcy5wYXJ0aWNpcGFudHMsIHRoaXMuY3VycmVudEF1dGhvciBdLA0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICB0aGlzLmpvaW5Sb29tKG5ld1Jvb20uX2lkKQ0KDQogICAgICAgICAgICAgICAgdGhpcy5yZXNldFZhbHVlcygpDQoNCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdyb29tJywgcGFyYW1zOiB7IGlkOiBuZXdSb29tLl9pZCB9IH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfSwNCn0NCg=="},{"version":3,"sources":["CreateRoomView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"CreateRoomView.vue","sourceRoot":"src/components/messages","sourcesContent":["<template>\r\n    <v-form class=\"fill-height\" v-model=\"isValid\">\r\n        <v-row class=\"fill-height\" justify=\"center\" align=\"center\">\r\n                <v-card class=\"pa-5\" width=\"800px\">\r\n                    <div class=\"title pb-3\">\r\n                        Create Room\r\n                    </div>\r\n                    <v-row>\r\n                        <v-col cols=\"12\">\r\n                            <v-text-field\r\n                                v-model=\"name\"\r\n                                :rules=\"nameRules\"\r\n                                :counter=\"25\"\r\n                                label=\"Name\"\r\n                                required\r\n                                outlined\r\n                                dense\r\n                                autofocus\r\n                            />\r\n                        </v-col>\r\n\r\n                        <v-col cols=\"12\">\r\n                            <v-select\r\n                                v-model=\"participants\"\r\n                                :items=\"otherAuthors\"\r\n                                :rules=\"participantsRules\"\r\n                                item-text=\"firstName\"\r\n                                label=\"Participants\"\r\n                                return-object\r\n                                multiple\r\n                                required\r\n                                outlined\r\n                                dense\r\n                            /> \r\n                        </v-col>\r\n\r\n                        <v-col cols=\"12\">\r\n                            <v-row no-gutters justify=\"space-between\">\r\n                                <v-btn\r\n                                    class=\"red--text\"\r\n                                    depressed\r\n                                    outlined\r\n                                    to=\"/messages\"\r\n                                    exact\r\n                                >\r\n                                    Cancel\r\n                                </v-btn>\r\n                                <v-btn\r\n                                    class=\"grey--text text--darken-2\"\r\n                                    depressed\r\n                                    outlined\r\n                                    @click=\"() => validateAndCreateRoom()\"\r\n                                >\r\n                                    Create\r\n                                </v-btn>\r\n                            </v-row>\r\n                        </v-col>\r\n                    </v-row>\r\n                </v-card>\r\n        </v-row>\r\n    </v-form>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex'\r\n\r\nexport default {\r\n    name: 'CreateRoomView',\r\n\r\n    data: () => ({\r\n        isValid: false,\r\n\r\n        name: '',\r\n        nameRules: [\r\n            v => !!v || 'Name is required',\r\n            v => v.length <= 25 || 'Name must be less than 25 characters',\r\n        ],\r\n\r\n        participants: [],\r\n        participantsRules: [\r\n            v => v.length > 0 || 'You must include at least one participant'\r\n        ],\r\n    }),\r\n\r\n    computed: {\r\n        ...mapGetters({\r\n            userId: 'auth/userId',\r\n            authors: 'messaging/authors',\r\n        }),\r\n\r\n        otherAuthors(){\r\n            return this.authors.filter(author => author._id !== this.userId)\r\n        },\r\n\r\n        currentAuthor(){\r\n            return this.authors.filter(author => author._id === this.userId)[0]\r\n        },\r\n    },\r\n\r\n    created(){\r\n        this.loadData()\r\n    },\r\n\r\n    beforeDestroy(){\r\n        this.clearAuthors\r\n    },\r\n\r\n    methods: {\r\n        ...mapActions({\r\n            clearAuthors: 'messaging/clearAuthors',\r\n            getAuthors: 'messaging/getAuthors',\r\n            createRoom: 'messaging/createRoom',\r\n            joinRoom: 'messaging/joinRoom',\r\n        }),\r\n\r\n        resetValues(){\r\n            this.name = ''\r\n            this.participants = []\r\n        },\r\n\r\n        async loadData(){\r\n            await this.getAuthors()\r\n        },\r\n\r\n        async validateAndCreateRoom(){\r\n            if (this.isValid){\r\n\r\n                console.log(this.participants)\r\n                const newRoom = await this.createRoom({\r\n                    name: this.name,\r\n                    authors: [ ...this.participants, this.currentAuthor ],\r\n                })\r\n\r\n                this.joinRoom(newRoom._id)\r\n\r\n                this.resetValues()\r\n\r\n                this.$router.push({ name: 'room', params: { id: newRoom._id } })\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}