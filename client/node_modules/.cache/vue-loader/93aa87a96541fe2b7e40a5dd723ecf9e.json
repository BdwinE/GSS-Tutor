{"remainingRequest":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\src\\components\\messages\\RoomView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\src\\components\\messages\\RoomView.vue","mtime":1619908030896},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619908227131},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1619908227181},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1619908226782},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619908227131},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1619908281553}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdSb29tVmlldycsDQoNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBuZXdNZXNzYWdlOiAnJywNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjb21wdXRlZDogew0KICAgICAgICAuLi5tYXBHZXR0ZXJzKHsNCiAgICAgICAgICAgIHVzZXJJZDogJ2F1dGgvdXNlcklkJywNCiAgICAgICAgICAgIHJvb206ICdtZXNzYWdpbmcvcm9vbScsDQogICAgICAgIH0pLA0KDQogICAgICAgIGF1dGhvcnMoKXsNCiAgICAgICAgICAgIGlmICghdGhpcy5yb29tLmF1dGhvcnMpIHJldHVybiBbXQ0KDQogICAgICAgICAgICByZXR1cm4gdGhpcy5yb29tLmF1dGhvcnMNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIG1lc3NhZ2VzKCl7DQogICAgICAgICAgICBpZiAoIXRoaXMucm9vbS5tZXNzYWdlcykgcmV0dXJuIFtdDQoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvb20ubWVzc2FnZXMNCiAgICAgICAgfSwNCiAgICB9LA0KDQogICAgd2F0Y2g6IHsNCiAgICAgICAgJyRyb3V0ZS5wYXJhbXMuaWQnOiBmdW5jdGlvbigpeyANCiAgICAgICAgICAgIHRoaXMucmVzZXRWYWx1ZXMoKQ0KICAgICAgICAgICAgdGhpcy5sb2FkRGF0YSgpDQogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRyZWZzWyd0ZXh0LWlucHV0J10uZm9jdXMoKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjcmVhdGVkKCl7DQogICAgICAgIHRoaXMubG9hZERhdGEoKQ0KICAgIH0sDQoNCiAgICBiZWZvcmVEZXN0cm95KCl7DQogICAgICAgIHRoaXMuY2xlYXJSb29tKCkNCiAgICB9LA0KICAgIA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLi4ubWFwQWN0aW9ucyh7DQogICAgICAgICAgICBjbGVhclJvb206ICdtZXNzYWdpbmcvY2xlYXJSb29tJywNCiAgICAgICAgICAgIGdldFJvb206ICdtZXNzYWdpbmcvZ2V0Um9vbScsDQogICAgICAgICAgICBnZXRNZXNzYWdlczogJ21lc3NhZ2luZy9nZXRNZXNzYWdlcycsDQogICAgICAgICAgICBjcmVhdGVNZXNzYWdlOiAnbWVzc2FnaW5nL2NyZWF0ZU1lc3NhZ2UnLA0KICAgICAgICB9KSwNCg0KICAgICAgICByZXNldFZhbHVlcygpew0KICAgICAgICAgICAgdGhpcy5uZXdNZXNzYWdlID0gJycNCiAgICAgICAgfSwNCg0KICAgICAgICBhc3luYyBsb2FkRGF0YSgpew0KICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gdGhpcy4kcm91dGUucGFyYW1zDQoNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0Um9vbShpZCkNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TWVzc2FnZXMoeyByb29tSWQ6IGlkIH0pDQogICAgICAgIH0sDQoNCiAgICAgICAgaXNDdXJyZW50VXNlcihhdXRob3JJZCl7DQogICAgICAgICAgICByZXR1cm4gYXV0aG9ySWQgPT09IHRoaXMudXNlcklkDQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0QXV0aG9yKGF1dGhvcklkKXsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dGhvcnMuZmlsdGVyKGF1dGhvciA9PiBhdXRob3IuX2lkID09PSBhdXRob3JJZClbMF0gfHwge30NCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIHNob3dPcHRpb25zKCl7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2tlZCcpDQogICAgICAgIH0sDQoNCiAgICAgICAgYXN5bmMgc2VuZE1lc3NhZ2UoKXsNCiAgICAgICAgICAgIHRoaXMubmV3TWVzc2FnZSA9IHRoaXMubmV3TWVzc2FnZS50cmltKCkNCiAgICAgICAgICAgIGlmICh0aGlzLm5ld01lc3NhZ2UubGVuZ3RoID4gMCl7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgcm9vbUlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsDQogICAgICAgICAgICAgICAgICAgIGF1dGhvcklkOiB0aGlzLnVzZXJJZCwNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5uZXdNZXNzYWdlLA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm5ld01lc3NhZ2UgPSAnJw0KICAgICAgICB9DQogICAgfSwNCn0NCg=="},{"version":3,"sources":["RoomView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoomView.vue","sourceRoot":"src/components/messages","sourcesContent":["<template>\r\n    <v-container class=\"fill-height pa-0\" fluid>\r\n        <div class=\"d-flex flex-column fill-height fill-width\">\r\n            <div>\r\n                <v-toolbar flat dense>\r\n                    <v-row class=\"fill-height\" align=\"center\" justify=\"space-between\" no-gutters>\r\n                        <div class=\"title\">{{ room.name }}</div>\r\n                        <div>\r\n                            <v-btn @click=\"() => showOptions()\" icon tile>\r\n                                <v-icon>mdi-dots-horizontal</v-icon>\r\n                            </v-btn>\r\n                            <v-btn to=\"/messages\" exact icon tile>\r\n                                <v-icon>mdi-close</v-icon>\r\n                            </v-btn>\r\n                        </div>\r\n                    </v-row>\r\n                </v-toolbar>\r\n                <v-divider/>\r\n            </div>\r\n            <div class=\"d-flex flex-column-reverse justify-start flex-grow-1 overflow-scroll\">\r\n                <div\r\n                    v-for=\"message in messages\"\r\n                    :key=\"message._id\"\r\n                    :class=\"`d-flex flex-row justify-${isCurrentUser(message.authorId) ? 'end' : 'start'}`\"\r\n                >\r\n                    <div class=\"mx-5 mt-3\">\r\n                        <div v-if=\"!isCurrentUser(message.authorId)\" class=\"caption\">{{ getAuthor(message.authorId).firstName }}</div>\r\n                        <v-card :class=\"isCurrentUser(message.authorId) ? 'blue lighten-4' : ''\" max-width=\"600px\" flat>\r\n                            <v-card-text class=\"body-1 grey--text text--darken-4\">{{ message.text }}</v-card-text>\r\n                        </v-card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"mx-5 mb-3 mt-5\">\r\n                <v-row align=\"center\" no-gutters>\r\n                    <v-text-field\r\n                        ref=\"text-input\"\r\n                        v-model=\"newMessage\"\r\n                        placeholder=\"Type your message here...\"\r\n                        solo\r\n                        flat\r\n                        hide-details\r\n                        autofocus\r\n                        @keydown.enter=\"() => sendMessage()\"\r\n                    />\r\n                    <v-btn\r\n                        class=\"grey--text text--darken-2 ml-5\"\r\n                        x-large\r\n                        icon\r\n                        @click=\"() => sendMessage()\"\r\n                    >\r\n                        <v-icon>mdi-send</v-icon>\r\n                    </v-btn>\r\n                </v-row>\r\n            </div>\r\n        </div>\r\n    </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex'\r\n\r\nexport default {\r\n    name: 'RoomView',\r\n\r\n    data(){\r\n        return {\r\n            newMessage: '',\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        ...mapGetters({\r\n            userId: 'auth/userId',\r\n            room: 'messaging/room',\r\n        }),\r\n\r\n        authors(){\r\n            if (!this.room.authors) return []\r\n\r\n            return this.room.authors\r\n        },\r\n        \r\n        messages(){\r\n            if (!this.room.messages) return []\r\n\r\n            return this.room.messages\r\n        },\r\n    },\r\n\r\n    watch: {\r\n        '$route.params.id': function(){ \r\n            this.resetValues()\r\n            this.loadData()\r\n            requestAnimationFrame(() => {\r\n                return this.$refs['text-input'].focus()\r\n            })\r\n        }\r\n    },\r\n\r\n    created(){\r\n        this.loadData()\r\n    },\r\n\r\n    beforeDestroy(){\r\n        this.clearRoom()\r\n    },\r\n    \r\n    methods: {\r\n        ...mapActions({\r\n            clearRoom: 'messaging/clearRoom',\r\n            getRoom: 'messaging/getRoom',\r\n            getMessages: 'messaging/getMessages',\r\n            createMessage: 'messaging/createMessage',\r\n        }),\r\n\r\n        resetValues(){\r\n            this.newMessage = ''\r\n        },\r\n\r\n        async loadData(){\r\n            const { id } = this.$route.params\r\n\r\n            await this.getRoom(id)\r\n            await this.getMessages({ roomId: id })\r\n        },\r\n\r\n        isCurrentUser(authorId){\r\n            return authorId === this.userId\r\n        },\r\n\r\n        getAuthor(authorId){\r\n            return this.authors.filter(author => author._id === authorId)[0] || {}\r\n        },\r\n        \r\n        showOptions(){\r\n            console.log('clicked')\r\n        },\r\n\r\n        async sendMessage(){\r\n            this.newMessage = this.newMessage.trim()\r\n            if (this.newMessage.length > 0){\r\n                await this.createMessage({\r\n                    roomId: this.$route.params.id,\r\n                    authorId: this.userId,\r\n                    text: this.newMessage,\r\n                })\r\n            }\r\n            this.newMessage = ''\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}