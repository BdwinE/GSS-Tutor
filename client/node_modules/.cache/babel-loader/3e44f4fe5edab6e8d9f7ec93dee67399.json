{"remainingRequest":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\src\\store\\modules\\messaging.js","dependencies":[{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\src\\store\\modules\\messaging.js","mtime":1619908030912},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619908227131},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1619908226782},{"path":"C:\\Users\\asolu\\Desktop\\MSU_Denver\\Spring_2021\\Technical_Software_Proj\\Granular_Softwar_Solutions\\Granular%20Software%20Solutions\\client\\node_modules\\eslint-loader\\index.js","mtime":1619908277030}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9hc29sdS9EZXNrdG9wL01TVV9EZW52ZXIvU3ByaW5nXzIwMjEvVGVjaG5pY2FsX1NvZnR3YXJlX1Byb2ovR3JhbnVsYXJfU29mdHdhcl9Tb2x1dGlvbnMvR3JhbnVsYXIlMjBTb2Z0d2FyZSUyMFNvbHV0aW9ucy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvYXNvbHUvRGVza3RvcC9NU1VfRGVudmVyL1NwcmluZ18yMDIxL1RlY2huaWNhbF9Tb2Z0d2FyZV9Qcm9qL0dyYW51bGFyX1NvZnR3YXJfU29sdXRpb25zL0dyYW51bGFyJTIwU29mdHdhcmUlMjBTb2x1dGlvbnMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2Fzb2x1L0Rlc2t0b3AvTVNVX0RlbnZlci9TcHJpbmdfMjAyMS9UZWNobmljYWxfU29mdHdhcmVfUHJvai9HcmFudWxhcl9Tb2Z0d2FyX1NvbHV0aW9ucy9HcmFudWxhciUyMFNvZnR3YXJlJTIwU29sdXRpb25zL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBhdXRob3JBcGkgZnJvbSAnLi4vLi4vYXBpL21lc3NhZ2luZy9hdXRob3JzJzsKaW1wb3J0IHJvb21BcGkgZnJvbSAnLi4vLi4vYXBpL21lc3NhZ2luZy9yb29tcyc7CmltcG9ydCBtZXNzYWdlQXBpIGZyb20gJy4uLy4uL2FwaS9tZXNzYWdpbmcvbWVzc2FnZXMnOyAvLyBUbyBiZSByZW1vdmVkCgppbXBvcnQgbWVzc2FnaW5nQXBpIGZyb20gJy4uLy4uL2FwaS9tZXNzYWdpbmcnOwp2YXIgbmFtZXNwYWNlZCA9IHRydWU7CnZhciBzdGF0ZSA9IHsKICBpc0Nvbm5lY3RlZDogZmFsc2UsCiAgY29ubmVjdGVkUm9vbXM6IFtdLAogIGF1dGhvcnM6IFtdLAogIHJvb21zOiBbXSwKICByb29tOiB7fSwKICBtZXNzYWdlOiB7fSwKICAvLyBUbyBiZSByZW1vdmVkCiAgbWVzc2FnZXM6IFtdCn07CnZhciBnZXR0ZXJzID0gewogIGlzQ29ubmVjdGVkOiBmdW5jdGlvbiBpc0Nvbm5lY3RlZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmlzQ29ubmVjdGVkOwogIH0sCiAgYXV0aG9yczogZnVuY3Rpb24gYXV0aG9ycyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmF1dGhvcnM7CiAgfSwKICByb29tczogZnVuY3Rpb24gcm9vbXMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5yb29tczsKICB9LAogIHJvb206IGZ1bmN0aW9uIHJvb20oc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5yb29tOwogIH0sCiAgbWVzc2FnZTogZnVuY3Rpb24gbWVzc2FnZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLm1lc3NhZ2U7CiAgfSwKICAvLyBUbyBiZSByZW1vdmVkCiAgbWVzc2FnZXM6IGZ1bmN0aW9uIG1lc3NhZ2VzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubWVzc2FnZXM7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyBSZXNldHMKICBjbGVhckF1dGhvcnM6IGZ1bmN0aW9uIGNsZWFyQXV0aG9ycyhfcmVmKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICBjb21taXQoJ2NsZWFyQXV0aG9ycycpOwogIH0sCiAgY2xlYXJSb29tczogZnVuY3Rpb24gY2xlYXJSb29tcyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgIGNvbW1pdCgnY2xlYXJSb29tcycpOwogIH0sCiAgY2xlYXJSb29tOiBmdW5jdGlvbiBjbGVhclJvb20oX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICBjb21taXQoJ2NsZWFyUm9vbScpOwogIH0sCiAgY2xlYXJNZXNzYWdlOiBmdW5jdGlvbiBjbGVhck1lc3NhZ2UoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICBjb21taXQoJ2NsZWFyTWVzc2FnZScpOwogIH0sCiAgLy8gSW5jb21pbmcgc3lzdGVtIGV2ZW50cwogIFNPQ0tFVF9DT05ORUNUOiBmdW5jdGlvbiBTT0NLRVRfQ09OTkVDVChfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIGNvbW1pdCgnc2V0SXNDb25uZWN0ZWQnLCB0cnVlKTsKICB9LAogIFNPQ0tFVF9ESVNDT05ORUNUOiBmdW5jdGlvbiBTT0NLRVRfRElTQ09OTkVDVChfcmVmNikgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIGNvbW1pdCgnc2V0SXNDb25uZWN0ZWQnLCBmYWxzZSk7CiAgfSwKICAvLyBSb29tcyBvdXRnb2luZyByZXF1ZXN0cwogIGNyZWF0ZVJvb206IGZ1bmN0aW9uIGNyZWF0ZVJvb20oX3JlZjcsIGNyZWF0aW9uQXJncykgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCByb29tOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByb29tQXBpLmNyZWF0ZVJvb20uYmluZChfdGhpcy5fdm0uJHNvY2tldCkoY3JlYXRpb25BcmdzKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByb29tID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBjb21taXQoJ2FkZE5ld1Jvb20nLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJvb20pLCB7fSwgewogICAgICAgICAgICAgICAgbW9zdFJlY2VudE1lc3NhZ2U6IHt9CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0Um9vbScsIHJvb20pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJvb20pOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgam9pblJvb206IGZ1bmN0aW9uIGpvaW5Sb29tKF9yZWY4LCByb29tKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjguY29tbWl0OwogICAgcm9vbUFwaS5qb2luUm9vbS5iaW5kKHRoaXMuX3ZtLiRzb2NrZXQpKHJvb20pOwogIH0sCiAgam9pblJvb21zOiBmdW5jdGlvbiBqb2luUm9vbXMoX3JlZjksIHJvb21zKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjkuY29tbWl0OwogICAgcm9vbUFwaS5qb2luUm9vbXMuYmluZCh0aGlzLl92bS4kc29ja2V0KShyb29tcyk7CiAgfSwKICBsZWF2ZVJvb206IGZ1bmN0aW9uIGxlYXZlUm9vbShfcmVmMTAsIHJvb20pIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTAuY29tbWl0OwogICAgcm9vbUFwaS5sZWF2ZVJvb20uYmluZCh0aGlzLl92bS4kc29ja2V0KShyb29tKTsKICB9LAogIGxlYXZlUm9vbXM6IGZ1bmN0aW9uIGxlYXZlUm9vbXMoX3JlZjExLCByb29tcykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYxMS5jb21taXQ7CiAgICByb29tQXBpLmxlYXZlUm9vbXMuYmluZCh0aGlzLl92bS4kc29ja2V0KShyb29tcyk7CiAgfSwKICBsZWF2ZUFsbFJvb21zOiBmdW5jdGlvbiBsZWF2ZUFsbFJvb21zKF9yZWYxMikgewogICAgdmFyIHN0YXRlID0gX3JlZjEyLnN0YXRlLAogICAgICAgIGNvbW1pdCA9IF9yZWYxMi5jb21taXQ7CiAgICByb29tQXBpLmxlYXZlUm9vbXMuYmluZCh0aGlzLl92bS4kc29ja2V0KShzdGF0ZS5jb25uZWN0ZWRSb29tcyk7CiAgfSwKICBnZXRSb29tczogZnVuY3Rpb24gZ2V0Um9vbXMoX3JlZjEzLCBmaWx0ZXJzKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHN0YXRlLCBjb21taXQsIHJvb21zOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN0YXRlID0gX3JlZjEzLnN0YXRlLCBjb21taXQgPSBfcmVmMTMuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcm9vbUFwaS5nZXRBbGxSb29tcyhmaWx0ZXJzKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByb29tcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAoc3RhdGUucm9vbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgY29tbWl0KCdhZGRSb29tcycsIHJvb21zKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRSb29tcycsIHJvb21zKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAogIGdldFJvb206IGZ1bmN0aW9uIGdldFJvb20oX3JlZjE0LCBpZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBjb21taXQsIHJvb207CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjE0LmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJvb21BcGkuZ2V0Um9vbUJ5SWQoaWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJvb20gPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBjb21taXQoJ3NldFJvb20nLCByb29tKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0sCiAgdXBkYXRlUm9vbTogZnVuY3Rpb24gdXBkYXRlUm9vbShfcmVmMTUsIF9yZWYxNikgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciBjb21taXQsIGlkLCB1cGRhdGVBcmdzLCByb29tOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYxNS5jb21taXQ7CiAgICAgICAgICAgICAgaWQgPSBfcmVmMTYuaWQsIHVwZGF0ZUFyZ3MgPSBfcmVmMTYudXBkYXRlQXJnczsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHJvb21BcGkudXBkYXRlUm9vbUJ5SWQuYmluZChfdGhpczIuX3ZtLiRzb2NrZXQpKGlkLCB1cGRhdGVBcmdzKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByb29tID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgY29tbWl0KCdyZW1vdmVBbmRBZGRVcGRhdGVkUm9vbScsIHsKICAgICAgICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgICAgICAgIG5ld1Jvb206IHJvb20KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjb21taXQoJ3VwZGF0ZVJvb20nLCByb29tKTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSgpOwogIH0sCiAgYXJjaGl2ZVJvb206IGZ1bmN0aW9uIGFyY2hpdmVSb29tKF9yZWYxNywgaWQpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICB2YXIgY29tbWl0LCByb29tOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYxNy5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiByb29tQXBpLmFyY2hpdmVSb29tQnlJZC5iaW5kKF90aGlzMy5fdm0uJHNvY2tldCkoaWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJvb20gPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICBjb21taXQoJ3JlbW92ZUFuZEFkZFVwZGF0ZWRSb29tJywgewogICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgbmV3Um9vbTogcm9vbQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbW1pdCgnY2xlYXJSb29tJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNSk7CiAgICB9KSkoKTsKICB9LAogIGRlbGV0ZVJvb206IGZ1bmN0aW9uIGRlbGV0ZVJvb20oX3JlZjE4LCBpZCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgIHZhciBjb21taXQsIHJvb207CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjE4LmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHJvb21BcGkuZGVsZXRlUm9vbUJ5SWQuYmluZChfdGhpczQuX3ZtLiRzb2NrZXQpKGlkKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByb29tID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgY29tbWl0KCdyZW1vdmVSb29tJywgaWQpOwogICAgICAgICAgICAgIGNvbW1pdCgnY2xlYXJSb29tJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlNik7CiAgICB9KSkoKTsKICB9LAogIC8vIFJvb21zIGluY29taW5nIHJlc3BvbnNlcwogIFNPQ0tFVF9ST09NX0NSRUFURUQ6IGZ1bmN0aW9uIFNPQ0tFVF9ST09NX0NSRUFURUQoX3JlZjE5LCBfcmVmMjApIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTkuY29tbWl0OwogICAgdmFyIHJvb20gPSBfcmVmMjAucm9vbTsKICAgIGNvbW1pdCgnYWRkTmV3Um9vbScsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm9vbSksIHt9LCB7CiAgICAgIG1vc3RSZWNlbnRNZXNzYWdlOiB7fQogICAgfSkpOwogIH0sCiAgU09DS0VUX1JPT01fSk9JTkVEOiBmdW5jdGlvbiBTT0NLRVRfUk9PTV9KT0lORUQoX3JlZjIxLCByb29tKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIxLmNvbW1pdDsKICAgIGNvbW1pdCgnYWRkQ29ubmVjdGVkUm9vbScsIHJvb20pOwogIH0sCiAgU09DS0VUX1JPT01TX0pPSU5FRDogZnVuY3Rpb24gU09DS0VUX1JPT01TX0pPSU5FRChfcmVmMjIsIHJvb21zKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIyLmNvbW1pdDsKICAgIGNvbW1pdCgnYWRkQ29ubmVjdGVkUm9vbXMnLCByb29tcyk7CiAgfSwKICBTT0NLRVRfUk9PTV9MRUZUOiBmdW5jdGlvbiBTT0NLRVRfUk9PTV9MRUZUKF9yZWYyMywgcm9vbSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyMy5jb21taXQ7CiAgICBjb21taXQoJ3JlbW92ZUNvbm5lY3RlZFJvb20nLCByb29tKTsKICB9LAogIFNPQ0tFVF9ST09NU19MRUZUOiBmdW5jdGlvbiBTT0NLRVRfUk9PTVNfTEVGVChfcmVmMjQsIHJvb21zKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjI0LmNvbW1pdDsKICAgIGNvbW1pdCgncmVtb3ZlQ29ubmVjdGVkUm9vbXMnLCByb29tcyk7CiAgfSwKICBTT0NLRVRfUk9PTV9VUERBVEVEOiBmdW5jdGlvbiBTT0NLRVRfUk9PTV9VUERBVEVEKF9yZWYyNSwgX3JlZjI2KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmMjUuc3RhdGUsCiAgICAgICAgY29tbWl0ID0gX3JlZjI1LmNvbW1pdDsKICAgIHZhciByb29tID0gX3JlZjI2LnJvb207CiAgICBjb21taXQoJ3JlbW92ZUFuZEFkZFVwZGF0ZWRSb29tJywgewogICAgICBpZDogaWQsCiAgICAgIG5ld1Jvb206IHJvb20KICAgIH0pOwoKICAgIGlmIChzdGF0ZS5yb29tLl9pZCA9PT0gcm9vbS5faWQpIHsKICAgICAgY29tbWl0KCd1cGRhdGVSb29tJywgcm9vbSk7CiAgICB9CiAgfSwKICBTT0NLRVRfUk9PTV9BUkNISVZFRDogZnVuY3Rpb24gU09DS0VUX1JPT01fQVJDSElWRUQoX3JlZjI3LCBfcmVmMjgpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMjcuY29tbWl0OwogICAgdmFyIHJvb20gPSBfcmVmMjgucm9vbTsKICAgIGNvbW1pdCgncmVtb3ZlQW5kQWRkVXBkYXRlZFJvb20nLCB7CiAgICAgIGlkOiBpZCwKICAgICAgbmV3Um9vbTogcm9vbQogICAgfSk7CgogICAgaWYgKHN0YXRlLnJvb20uX2lkID09PSByb29tLl9pZCkgewogICAgICBjb21taXQoJ2NsZWFyUm9vbScpOwogICAgfQogIH0sCiAgU09DS0VUX1JPT01fREVMRVRFRDogZnVuY3Rpb24gU09DS0VUX1JPT01fREVMRVRFRChfcmVmMjksIF9yZWYzMCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyOS5jb21taXQ7CiAgICB2YXIgcm9vbSA9IF9yZWYzMC5yb29tOwogICAgY29tbWl0KCdyZW1vdmVSb29tJywgaWQpOwoKICAgIGlmIChzdGF0ZS5yb29tLl9pZCA9PT0gcm9vbS5faWQpIHsKICAgICAgY29tbWl0KCdjbGVhclJvb20nKTsKICAgIH0KICB9LAogIC8vIE1lc3NhZ2VzIG91dGdvaW5nIHJlcXVlc3RzCiAgY3JlYXRlTWVzc2FnZTogZnVuY3Rpb24gY3JlYXRlTWVzc2FnZShfcmVmMzEsIGNyZWF0aW9uQXJncykgewogICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgIHZhciBjb21taXQsIG1lc3NhZ2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjMxLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VBcGkuY3JlYXRlTWVzc2FnZS5iaW5kKF90aGlzNS5fdm0uJHNvY2tldCkoY3JlYXRpb25BcmdzKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBtZXNzYWdlID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgY29tbWl0KCdhZGROZXdNZXNzYWdlJywgbWVzc2FnZSk7CiAgICAgICAgICAgICAgY29tbWl0KCdzZXRNb3N0UmVjZW50TWVzc2FnZScsIHsKICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLnJvb21JZCwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU3KTsKICAgIH0pKSgpOwogIH0sCiAgZ2V0TWVzc2FnZXM6IGZ1bmN0aW9uIGdldE1lc3NhZ2VzKF9yZWYzMiwgZmlsdGVycykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgIHZhciBjb21taXQsIG1lc3NhZ2VzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzMi5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlQXBpLmdldEFsbE1lc3NhZ2VzKGZpbHRlcnMpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIG1lc3NhZ2VzID0gX2NvbnRleHQ4LnNlbnQ7CgogICAgICAgICAgICAgIGlmICghc3RhdGUucm9vbS5tZXNzYWdlcykgewogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRNZXNzYWdlcycsIG1lc3NhZ2VzKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29tbWl0KCdhZGRNZXNzYWdlcycsIG1lc3NhZ2VzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlOCk7CiAgICB9KSkoKTsKICB9LAogIGdldE1lc3NhZ2U6IGZ1bmN0aW9uIGdldE1lc3NhZ2UoX3JlZjMzLCBpZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkoKSB7CiAgICAgIHZhciBjb21taXQsIG1lc3NhZ2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjMzLmNvbW1pdDsKICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VBcGkuZ2V0TWVzc2FnZUJ5SWQoaWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIG1lc3NhZ2UgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgICBjb21taXQoJ3NldE1lc3NhZ2UnLCBtZXNzYWdlKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU5KTsKICAgIH0pKSgpOwogIH0sCiAgdXBkYXRlTWVzc2FnZTogZnVuY3Rpb24gdXBkYXRlTWVzc2FnZShfcmVmMzQsIF9yZWYzNSkgewogICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICB2YXIgY29tbWl0LCBpZCwgdXBkYXRlQXJncywgbWVzc2FnZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjM0LmNvbW1pdDsKICAgICAgICAgICAgICBpZCA9IF9yZWYzNS5pZCwgdXBkYXRlQXJncyA9IF9yZWYzNS51cGRhdGVBcmdzOwogICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VBcGkudXBkYXRlTWVzc2FnZUJ5SWQuYmluZChfdGhpczYuX3ZtLiRzb2NrZXQpKGlkLCB1cGRhdGVBcmdzKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBtZXNzYWdlID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgIGNvbW1pdCgncmVwbGFjZU1lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICBpZDogaWQsCiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY29tbWl0KCd1cGRhdGVNZXNzYWdlJywgbWVzc2FnZSk7CiAgICAgICAgICAgICAgY29tbWl0KCdzZXRNb3N0UmVjZW50TWVzc2FnZScsIHsKICAgICAgICAgICAgICAgIGlkOiBtZXNzYWdlLnJvb21JZCwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTApOwogICAgfSkpKCk7CiAgfSwKICBhcmNoaXZlTWVzc2FnZTogZnVuY3Rpb24gYXJjaGl2ZU1lc3NhZ2UoX3JlZjM2LCBpZCkgewogICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICB2YXIgY29tbWl0LCBtZXNzYWdlOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMzYuY29tbWl0OwogICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VBcGkuYXJjaGl2ZU1lc3NhZ2VCeUlkLmJpbmQoX3RoaXM3Ll92bS4kc29ja2V0KShpZCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgbWVzc2FnZSA9IF9jb250ZXh0MTEuc2VudDsKICAgICAgICAgICAgICBjb21taXQoJ3JlcGxhY2VNZXNzYWdlJywgewogICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgbmV3TWVzc2FnZTogbWVzc2FnZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbW1pdCgnY2xlYXJNZXNzYWdlJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTExKTsKICAgIH0pKSgpOwogIH0sCiAgZGVsZXRlTWVzc2FnZTogZnVuY3Rpb24gZGVsZXRlTWVzc2FnZShfcmVmMzcsIGlkKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgIHZhciBjb21taXQsIG1lc3NhZ2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYzNy5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZUFwaS5kZWxldGVNZXNzYWdlQnlJZC5iaW5kKF90aGlzOC5fdm0uJHNvY2tldCkoaWQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIG1lc3NhZ2UgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgY29tbWl0KCdyZW1vdmVNZXNzYWdlJywgaWQpOwogICAgICAgICAgICAgIGNvbW1pdCgnY2xlYXJNZXNzYWdlJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTEyKTsKICAgIH0pKSgpOwogIH0sCiAgLy8gTWVzc2FnZXMgaW5jb21pbmcgcmVzcG9uc2VzCiAgLy8gVG8gYmUgdXNlZCBpbiBuZXcgaW1wbGVtZW50YXRpb24KICBTT0NLRVRfTUVTU0FHRV9DUkVBVEVEOiBmdW5jdGlvbiBTT0NLRVRfTUVTU0FHRV9DUkVBVEVEKF9yZWYzOCwgX3JlZjM5KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmMzguc3RhdGUsCiAgICAgICAgY29tbWl0ID0gX3JlZjM4LmNvbW1pdDsKICAgIHZhciBtZXNzYWdlID0gX3JlZjM5Lm1lc3NhZ2U7CiAgICBjb21taXQoJ3NldE1vc3RSZWNlbnRNZXNzYWdlJywgewogICAgICBpZDogbWVzc2FnZS5yb29tSWQsCiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgIH0pOwoKICAgIGlmIChzdGF0ZS5yb29tLl9pZCA9PT0gbWVzc2FnZS5yb29tSWQpIHsKICAgICAgY29tbWl0KCdhZGROZXdNZXNzYWdlJywgbWVzc2FnZSk7CiAgICB9CiAgfSwKICBTT0NLRVRfTUVTU0FHRV9VUERBVEVEOiBmdW5jdGlvbiBTT0NLRVRfTUVTU0FHRV9VUERBVEVEKF9yZWY0MCwgX3JlZjQxKSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmNDAuc3RhdGUsCiAgICAgICAgY29tbWl0ID0gX3JlZjQwLmNvbW1pdDsKICAgIHZhciBtZXNzYWdlID0gX3JlZjQxLm1lc3NhZ2U7CiAgICBjb21taXQoJ3JlcGxhY2VNb3N0UmVjZW50TWVzc2FnZScsIHsKICAgICAgaWQ6IG1lc3NhZ2Uucm9vbUlkLAogICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICB9KTsKCiAgICBpZiAoc3RhdGUucm9vbS5faWQgPT09IG1lc3NhZ2Uucm9vbUlkKSB7CiAgICAgIGNvbW1pdCgncmVwbGFjZU1lc3NhZ2UnLCB7CiAgICAgICAgaWQ6IG1lc3NhZ2Uucm9vbUlkLAogICAgICAgIG5ld01lc3NhZ2U6IG1lc3NhZ2UKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHN0YXRlLm1lc3NhZ2UuX2lkID09PSBtZXNzYWdlLl9pZCkgewogICAgICBjb21taXQoJ3VwZGF0ZU1lc3NhZ2UnLCBtZXNzYWdlKTsKICAgIH0KICB9LAogIFNPQ0tFVF9NRVNTQUdFX0FSQ0hJVkVEOiBmdW5jdGlvbiBTT0NLRVRfTUVTU0FHRV9BUkNISVZFRChfcmVmNDIsIF9yZWY0MykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0Mi5jb21taXQ7CiAgICB2YXIgbWVzc2FnZSA9IF9yZWY0My5tZXNzYWdlOwogICAgY29tbWl0KCdyZXBsYWNlTW9zdFJlY2VudE1lc3NhZ2UnLCB7CiAgICAgIGlkOiBtZXNzYWdlLnJvb21JZCwKICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgfSk7CgogICAgaWYgKHN0YXRlLnJvb20uX2lkID09PSBtZXNzYWdlLnJvb21JZCkgewogICAgICBjb21taXQoJ3JlcGxhY2VNZXNzYWdlJywgewogICAgICAgIGlkOiBtZXNzYWdlLnJvb21JZCwKICAgICAgICBuZXdNZXNzYWdlOiBtZXNzYWdlCiAgICAgIH0pOwogICAgfQoKICAgIGlmIChzdGF0ZS5tZXNzYWdlLl9pZCA9PT0gbWVzc2FnZS5faWQpIHsKICAgICAgY29tbWl0KCdjbGVhck1lc3NhZ2UnKTsKICAgIH0KICB9LAogIFNPQ0tFVF9NRVNTQUdFX0RFTEVURUQ6IGZ1bmN0aW9uIFNPQ0tFVF9NRVNTQUdFX0RFTEVURUQoX3JlZjQ0LCBfcmVmNDUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNDQuY29tbWl0OwogICAgdmFyIG1lc3NhZ2UgPSBfcmVmNDUubWVzc2FnZTsKICAgIGNvbW1pdCgncmVtb3ZlTW9zdFJlY2VudE1lc3NhZ2UnLCBtZXNzYWdlLnJvb21JZCk7CgogICAgaWYgKHN0YXRlLnJvb20uX2lkID09PSBtZXNzYWdlLnJvb21JZCkgewogICAgICBjb21taXQoJ3JlbW92ZU1lc3NhZ2UnLCBtZXNzYWdlLnJvb21JZCk7CiAgICB9CgogICAgaWYgKHN0YXRlLm1lc3NhZ2UuX2lkID09PSBtZXNzYWdlLl9pZCkgewogICAgICBjb21taXQoJ2NsZWFyTWVzc2FnZScpOwogICAgfQogIH0sCiAgLy8gQXV0aG9ycyBvdXRnb2luZyByZXF1ZXN0cwogIGdldEF1dGhvcnM6IGZ1bmN0aW9uIGdldEF1dGhvcnMoX3JlZjQ2LCBmaWx0ZXJzKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgIHZhciBjb21taXQsIGF1dGhvcnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY0Ni5jb21taXQ7CiAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gYXV0aG9yQXBpLmdldEFsbEF1dGhvcnMoZmlsdGVycyk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgYXV0aG9ycyA9IF9jb250ZXh0MTMuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHN0YXRlLmF1dGhvcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgY29tbWl0KCdhZGRBdXRob3JzJywgYXV0aG9ycyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0QXV0aG9ycycsIGF1dGhvcnMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMTMpOwogICAgfSkpKCk7CiAgfSwKICAvLyBBdXRob3JzIGluY29taW5nIHJlc3BvbnNlcwogIFNPQ0tFVF9BVVRIT1JfVVBEQVRFRDogZnVuY3Rpb24gU09DS0VUX0FVVEhPUl9VUERBVEVEKF9yZWY0NywgX3JlZjQ4KSB7CiAgICB2YXIgc3RhdGUgPSBfcmVmNDcuc3RhdGUsCiAgICAgICAgY29tbWl0ID0gX3JlZjQ3LmNvbW1pdDsKICAgIHZhciBhdXRob3IgPSBfcmVmNDguYXV0aG9yOwogICAgY29tbWl0KCdyZXBsYWNlQXV0aG9yJywgYXV0aG9yKTsKICB9LAogIFNPQ0tFVF9BVVRIT1JfQVJDSElWRUQ6IGZ1bmN0aW9uIFNPQ0tFVF9BVVRIT1JfQVJDSElWRUQoX3JlZjQ5LCBfcmVmNTApIHsKICAgIHZhciBjb21taXQgPSBfcmVmNDkuY29tbWl0OwogICAgdmFyIGF1dGhvciA9IF9yZWY1MC5hdXRob3I7CiAgICBjb21taXQoJ2FyY2hpdmVBdXRob3InLCBhdXRob3IuX2lkKTsKICB9LAogIFNPQ0tFVF9BVVRIT1JfREVMRVRFRDogZnVuY3Rpb24gU09DS0VUX0FVVEhPUl9ERUxFVEVEKF9yZWY1MSwgX3JlZjUyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjUxLmNvbW1pdDsKICAgIHZhciBhdXRob3IgPSBfcmVmNTIuYXV0aG9yOwogICAgY29tbWl0KCdyZW1vdmVBdXRob3InLCBhdXRob3IuX2lkKTsKICB9LAogIC8vIFRvIGJlIHJlbW92ZWQKICBDUkVBVEVfTUVTU0FHRTogZnVuY3Rpb24gQ1JFQVRFX01FU1NBR0UoY29udGV4dCwgbWVzc2FnZU9iaikgewogICAgbWVzc2FnaW5nQXBpLmNyZWF0ZU1lc3NhZ2UodGhpcy5fdm0uJHNvY2tldCwgbWVzc2FnZU9iaik7CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIC8vIFN5c3RlbSBldmVudCBtdXRhdG9ycwogIHNldElzQ29ubmVjdGVkOiBmdW5jdGlvbiBzZXRJc0Nvbm5lY3RlZChzdGF0ZSwgaXNDb25uZWN0ZWQpIHsKICAgIHN0YXRlLmlzQ29ubmVjdGVkID0gaXNDb25uZWN0ZWQ7CiAgfSwKICAvLyBSb29tcyBtdXRhdG9ycyAKICBjbGVhclJvb21zOiBmdW5jdGlvbiBjbGVhclJvb21zKHN0YXRlKSB7CiAgICBzdGF0ZS5yb29tcyA9IFtdOwogIH0sCiAgc2V0Um9vbXM6IGZ1bmN0aW9uIHNldFJvb21zKHN0YXRlLCByb29tcykgewogICAgc3RhdGUucm9vbXMgPSByb29tczsKICB9LAogIGFkZFJvb21zOiBmdW5jdGlvbiBhZGRSb29tcyhzdGF0ZSwgcm9vbXMpIHsKICAgIHZhciBfc3RhdGUkcm9vbXM7CgogICAgKF9zdGF0ZSRyb29tcyA9IHN0YXRlLnJvb21zKS5wdXNoLmFwcGx5KF9zdGF0ZSRyb29tcywgX3RvQ29uc3VtYWJsZUFycmF5KHJvb21zKSk7CiAgfSwKICBhZGROZXdSb29tOiBmdW5jdGlvbiBhZGROZXdSb29tKHN0YXRlLCByb29tKSB7CiAgICBzdGF0ZS5yb29tcy51bnNoaWZ0KHJvb20pOwogIH0sCiAgcmVtb3ZlQW5kQWRkVXBkYXRlZFJvb206IGZ1bmN0aW9uIHJlbW92ZUFuZEFkZFVwZGF0ZWRSb29tKHN0YXRlLCBfcmVmNTMpIHsKICAgIHZhciBpZCA9IF9yZWY1My5pZCwKICAgICAgICBuZXdSb29tID0gX3JlZjUzLm5ld1Jvb207CiAgICB2YXIgb2xkUm9vbSA9IHt9OwogICAgc3RhdGUucm9vbXMgPSBzdGF0ZS5yb29tcy5maWx0ZXIoZnVuY3Rpb24gKHJvb20pIHsKICAgICAgdmFyIHNob3VsZFJlcGxhY2UgPSByb29tLmlkID09PSBpZDsKICAgICAgaWYgKHNob3VsZFJlcGxhY2UpIG9sZFJvb20gPSByb29tOwogICAgICByZXR1cm4gIXNob3VsZFJlcGxhY2U7CiAgICB9KTsKICAgIHN0YXRlLnJvb21zLnVuc2hpZnQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvbGRSb29tKSwgbmV3Um9vbSkpOwogIH0sCiAgcmVtb3ZlUm9vbTogZnVuY3Rpb24gcmVtb3ZlUm9vbShzdGF0ZSwgaWQpIHsKICAgIHN0YXRlLnJvb21zID0gc3RhdGUucm9vbXMuZmlsdGVyKGZ1bmN0aW9uIChyb29tKSB7CiAgICAgIHJldHVybiByb29tLmlkICE9PSBpZDsKICAgIH0pOwogIH0sCiAgLy8gUm9vbXMgTWVzc2FnZSBtdXRhdG9ycwogIHNldE1vc3RSZWNlbnRNZXNzYWdlOiBmdW5jdGlvbiBzZXRNb3N0UmVjZW50TWVzc2FnZShzdGF0ZSwgX3JlZjU0KSB7CiAgICB2YXIgaWQgPSBfcmVmNTQuaWQsCiAgICAgICAgbWVzc2FnZSA9IF9yZWY1NC5tZXNzYWdlOwogICAgc3RhdGUucm9vbXMgPSBzdGF0ZS5yb29tcy5tYXAoZnVuY3Rpb24gKHJvb20pIHsKICAgICAgcmV0dXJuIHJvb20uX2lkID09PSBpZCA/IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm9vbSksIHt9LCB7CiAgICAgICAgbW9zdFJlY2VudE1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgfSkgOiByb29tOwogICAgfSk7CiAgfSwKICByZXBsYWNlTW9zdFJlY2VudE1lc3NhZ2U6IGZ1bmN0aW9uIHJlcGxhY2VNb3N0UmVjZW50TWVzc2FnZShzdGF0ZSwgX3JlZjU1KSB7CiAgICB2YXIgaWQgPSBfcmVmNTUuaWQsCiAgICAgICAgbWVzc2FnZSA9IF9yZWY1NS5tZXNzYWdlOwogICAgc3RhdGUucm9vbXMgPSBzdGF0ZS5yb29tcy5tYXAoZnVuY3Rpb24gKHJvb20pIHsKICAgICAgcmV0dXJuIHJvb20uX2lkID09PSBpZCA/IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm9vbSksIHt9LCB7CiAgICAgICAgbW9zdFJlY2VudE1lc3NhZ2U6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm9vbS5tb3N0UmVjZW50TWVzc2FnZSksIG1lc3NhZ2UpCiAgICAgIH0pIDogcm9vbTsKICAgIH0pOwogIH0sCiAgcmVtb3ZlTW9zdFJlY2VudE1lc3NhZ2U6IGZ1bmN0aW9uIHJlbW92ZU1vc3RSZWNlbnRNZXNzYWdlKHN0YXRlLCBpZCkgewogICAgc3RhdGUucm9vbXMgPSBzdGF0ZS5yb29tcy5tYXAoZnVuY3Rpb24gKHJvb20pIHsKICAgICAgcmV0dXJuIHJvb20uX2lkID09PSBpZCA/IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm9vbSksIHt9LCB7CiAgICAgICAgbW9zdFJlY2VudE1lc3NhZ2U6IHt9CiAgICAgIH0pIDogcm9vbTsKICAgIH0pOwogIH0sCiAgLy8gUm9vbSBtdXRhdG9ycwogIGNsZWFyUm9vbTogZnVuY3Rpb24gY2xlYXJSb29tKHN0YXRlKSB7CiAgICBzdGF0ZS5yb29tID0ge307CiAgfSwKICBzZXRSb29tOiBmdW5jdGlvbiBzZXRSb29tKHN0YXRlLCByb29tKSB7CiAgICBzdGF0ZS5yb29tID0gcm9vbTsKICB9LAogIHVwZGF0ZVJvb206IGZ1bmN0aW9uIHVwZGF0ZVJvb20oc3RhdGUsIHJvb20pIHsKICAgIHN0YXRlLnJvb20gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLnJvb20pLCByb29tKTsKICB9LAogIC8vIENvbm5lY3RlZCBSb29tcyBtdXRhdG9ycyAKICBhZGRDb25uZWN0ZWRSb29tOiBmdW5jdGlvbiBhZGRDb25uZWN0ZWRSb29tKHN0YXRlLCBqb2luZWRSb29tKSB7CiAgICBzdGF0ZS5jb25uZWN0ZWRSb29tcy5wdXNoKGpvaW5lZFJvb20pOwogIH0sCiAgYWRkQ29ubmVjdGVkUm9vbXM6IGZ1bmN0aW9uIGFkZENvbm5lY3RlZFJvb21zKHN0YXRlLCBqb2luZWRSb29tcykgewogICAgdmFyIF9zdGF0ZSRjb25uZWN0ZWRSb29tczsKCiAgICAoX3N0YXRlJGNvbm5lY3RlZFJvb21zID0gc3RhdGUuY29ubmVjdGVkUm9vbXMpLnB1c2guYXBwbHkoX3N0YXRlJGNvbm5lY3RlZFJvb21zLCBfdG9Db25zdW1hYmxlQXJyYXkoam9pbmVkUm9vbXMpKTsKICB9LAogIHJlbW92ZUNvbm5lY3RlZFJvb206IGZ1bmN0aW9uIHJlbW92ZUNvbm5lY3RlZFJvb20oc3RhdGUsIGxlZnRSb29tKSB7CiAgICBzdGF0ZS5jb25uZWN0ZWRSb29tcyA9IHN0YXRlLmNvbm5lY3RlZFJvb21zLmZpbHRlcihmdW5jdGlvbiAocm9vbSkgewogICAgICByZXR1cm4gcm9vbSAhPT0gbGVmdFJvb207CiAgICB9KTsKICB9LAogIHJlbW92ZUNvbm5lY3RlZFJvb21zOiBmdW5jdGlvbiByZW1vdmVDb25uZWN0ZWRSb29tcyhzdGF0ZSwgbGVmdFJvb21zKSB7CiAgICBzdGF0ZS5jb25uZWN0ZWRSb29tcyA9IHN0YXRlLmNvbm5lY3RlZFJvb21zLmZpbHRlcihmdW5jdGlvbiAocm9vbSkgewogICAgICByZXR1cm4gIWxlZnRSb29tcy5pbmNsdWRlcyhyb29tKTsKICAgIH0pOwogIH0sCiAgLy8gUm9vbSBNZXNzYWdlcyBtdXRhdG9ycwogIHNldE1lc3NhZ2VzOiBmdW5jdGlvbiBzZXRNZXNzYWdlcyhzdGF0ZSwgbWVzc2FnZXMpIHsKICAgIFZ1ZS5zZXQoc3RhdGUucm9vbSwgJ21lc3NhZ2VzJywgbWVzc2FnZXMpOwogIH0sCiAgYWRkTWVzc2FnZXM6IGZ1bmN0aW9uIGFkZE1lc3NhZ2VzKHN0YXRlLCBtZXNzYWdlcykgewogICAgdmFyIF9zdGF0ZSRyb29tJG1lc3NhZ2VzOwoKICAgIGlmICghc3RhdGUucm9vbS5tZXNzYWdlcykgewogICAgICBWdWUuc2V0KHN0YXRlLnJvb20sICdtZXNzYWdlcycsIFtdKTsKICAgIH0KCiAgICAoX3N0YXRlJHJvb20kbWVzc2FnZXMgPSBzdGF0ZS5yb29tLm1lc3NhZ2VzKS5wdXNoLmFwcGx5KF9zdGF0ZSRyb29tJG1lc3NhZ2VzLCBfdG9Db25zdW1hYmxlQXJyYXkobWVzc2FnZXMpKTsKICB9LAogIGFkZE5ld01lc3NhZ2U6IGZ1bmN0aW9uIGFkZE5ld01lc3NhZ2Uoc3RhdGUsIG1lc3NhZ2UpIHsKICAgIGlmICghc3RhdGUucm9vbS5tZXNzYWdlcykgewogICAgICBWdWUuc2V0KHN0YXRlLnJvb20sICdtZXNzYWdlcycsIFtdKTsKICAgIH0KCiAgICBzdGF0ZS5yb29tLm1lc3NhZ2VzLnVuc2hpZnQobWVzc2FnZSk7CiAgfSwKICByZXBsYWNlTWVzc2FnZTogZnVuY3Rpb24gcmVwbGFjZU1lc3NhZ2Uoc3RhdGUsIF9yZWY1NikgewogICAgdmFyIGlkID0gX3JlZjU2LmlkLAogICAgICAgIG5ld01lc3NhZ2UgPSBfcmVmNTYubmV3TWVzc2FnZTsKCiAgICBpZiAoIXN0YXRlLnJvb20ubWVzc2FnZXMpIHsKICAgICAgVnVlLnNldChzdGF0ZS5yb29tLCAnbWVzc2FnZXMnLCBbXSk7CiAgICAgIHN0YXRlLnJvb20ubWVzc2FnZXMucHVzaChuZXdNZXNzYWdlKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLnJvb20ubWVzc2FnZXMgPSBzdGF0ZS5yb29tLm1lc3NhZ2VzLm1hcChmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgIHJldHVybiBtZXNzYWdlLl9pZCA9PT0gaWQgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1lc3NhZ2UpLCBuZXdNZXNzYWdlKSA6IG1lc3NhZ2U7CiAgICAgIH0pOwogICAgfQogIH0sCiAgcmVtb3ZlTWVzc2FnZTogZnVuY3Rpb24gcmVtb3ZlTWVzc2FnZShzdGF0ZSwgaWQpIHsKICAgIGlmICghc3RhdGUucm9vbS5tZXNzYWdlcykgewogICAgICBWdWUuc2V0KHN0YXRlLnJvb20sICdtZXNzYWdlcycsIFtdKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0YXRlLnJvb20ubWVzc2FnZXMgPSBzdGF0ZS5yb29tLm1lc3NhZ2VzLmZpbHRlcihmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgIHJldHVybiBtZXNzYWdlLmlkICE9PSBpZDsKICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBNZXNzYWdlIG11dGF0b3JzCiAgY2xlYXJNZXNzYWdlOiBmdW5jdGlvbiBjbGVhck1lc3NhZ2Uoc3RhdGUpIHsKICAgIHN0YXRlLm1lc3NhZ2UgPSB7fTsKICB9LAogIHNldE1lc3NhZ2U6IGZ1bmN0aW9uIHNldE1lc3NhZ2Uoc3RhdGUsIG1lc3NhZ2UpIHsKICAgIHN0YXRlLm1lc3NhZ2UgPSBtZXNzYWdlOwogIH0sCiAgdXBkYXRlTWVzc2FnZTogZnVuY3Rpb24gdXBkYXRlTWVzc2FnZShzdGF0ZSwgbWVzc2FnZSkgewogICAgc3RhdGUubWVzc2FnZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUubWVzc2FnZSksIG1lc3NhZ2UpOwogIH0sCiAgLy8gQXV0aG9yIG11dGF0b3JzCiAgY2xlYXJBdXRob3JzOiBmdW5jdGlvbiBjbGVhckF1dGhvcnMoc3RhdGUpIHsKICAgIHN0YXRlLmF1dGhvcnMgPSBbXTsKICB9LAogIHNldEF1dGhvcnM6IGZ1bmN0aW9uIHNldEF1dGhvcnMoc3RhdGUsIGF1dGhvcnMpIHsKICAgIHN0YXRlLmF1dGhvcnMgPSBhdXRob3JzOwogIH0sCiAgYWRkQXV0aG9yczogZnVuY3Rpb24gYWRkQXV0aG9ycyhzdGF0ZSwgYXV0aG9ycykgewogICAgdmFyIF9zdGF0ZSRhdXRob3JzOwoKICAgIChfc3RhdGUkYXV0aG9ycyA9IHN0YXRlLmF1dGhvcnMpLnB1c2guYXBwbHkoX3N0YXRlJGF1dGhvcnMsIF90b0NvbnN1bWFibGVBcnJheShhdXRob3JzKSk7CiAgfSwKICByZXBsYWNlQXV0aG9yOiBmdW5jdGlvbiByZXBsYWNlQXV0aG9yKHN0YXRlLCBuZXdBdXRob3IpIHsKICAgIHN0YXRlLnJvb21zID0gc3RhdGUucm9vbXMubWFwKGZ1bmN0aW9uIChyb29tKSB7CiAgICAgIHZhciBhdXRob3JzID0gcm9vbS5hdXRob3JzLm1hcChmdW5jdGlvbiAoYXV0aG9yKSB7CiAgICAgICAgcmV0dXJuIGF1dGhvci5faWQgPT09IG5ld0F1dGhvci5faWQgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF1dGhvciksIG5ld0F1dGhvcikgOiBhdXRob3I7CiAgICAgIH0pOwogICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByb29tKSwge30sIHsKICAgICAgICBhdXRob3JzOiBhdXRob3JzCiAgICAgIH0pOwogICAgfSk7CiAgICBzdGF0ZS5yb29tID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZS5yb29tKSwge30sIHsKICAgICAgYXV0aG9yczogc3RhdGUucm9vbS5hdXRob3JzLm1hcChmdW5jdGlvbiAoYXV0aG9yKSB7CiAgICAgICAgcmV0dXJuIGF1dGhvci5faWQgPT09IG5ld0F1dGhvci5faWQgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGF1dGhvciksIG5ld0F1dGhvcikgOiBhdXRob3I7CiAgICAgIH0pCiAgICB9KTsKICB9LAogIGFyY2hpdmVBdXRob3I6IGZ1bmN0aW9uIGFyY2hpdmVBdXRob3Ioc3RhdGUsIGlkKSB7CiAgICBzdGF0ZS5yb29tcyA9IHN0YXRlLnJvb21zLm1hcChmdW5jdGlvbiAocm9vbSkgewogICAgICB2YXIgYXV0aG9ycyA9IHJvb20uYXV0aG9ycy5tYXAoZnVuY3Rpb24gKGF1dGhvcikgewogICAgICAgIHJldHVybiBhdXRob3IuX2lkID09PSBpZCA/IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXV0aG9yKSwge30sIHsKICAgICAgICAgIGlzQXJjaGl2ZWQ6IHRydWUsCiAgICAgICAgICBpc0FjdGl2ZTogZmFsc2UKICAgICAgICB9KSA6IGF1dGhvcjsKICAgICAgfSk7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJvb20pLCB7fSwgewogICAgICAgIGF1dGhvcnM6IGF1dGhvcnMKICAgICAgfSk7CiAgICB9KTsKICAgIHN0YXRlLnJvb20gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLnJvb20pLCB7fSwgewogICAgICBhdXRob3JzOiBzdGF0ZS5yb29tLmF1dGhvcnMubWFwKGZ1bmN0aW9uIChhdXRob3IpIHsKICAgICAgICByZXR1cm4gYXV0aG9yLl9pZCA9PT0gbmV3QXV0aG9yLl9pZCA/IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXV0aG9yKSwge30sIHsKICAgICAgICAgIGlzQXJjaGl2ZWQ6IHRydWUsCiAgICAgICAgICBpc0FjdGl2ZTogZmFsc2UKICAgICAgICB9KSA6IGF1dGhvcjsKICAgICAgfSkKICAgIH0pOwogIH0sCiAgcmVtb3ZlQXV0aG9yOiBmdW5jdGlvbiByZW1vdmVBdXRob3Ioc3RhdGUsIGlkKSB7CiAgICBzdGF0ZS5yb29tcyA9IHN0YXRlLnJvb21zLm1hcChmdW5jdGlvbiAocm9vbSkgewogICAgICB2YXIgYXV0aG9ycyA9IHJvb20uYXV0aG9ycy5maWx0ZXIoZnVuY3Rpb24gKGF1dGhvcikgewogICAgICAgIHJldHVybiBhdXRob3IuX2lkICE9PSBpZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJvb20pLCB7fSwgewogICAgICAgIGF1dGhvcnM6IGF1dGhvcnMKICAgICAgfSk7CiAgICB9KTsKICAgIHN0YXRlLnJvb20gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLnJvb20pLCB7fSwgewogICAgICBhdXRob3JzOiBzdGF0ZS5yb29tLmF1dGhvcnMuZmlsdGVyKGZ1bmN0aW9uIChhdXRob3IpIHsKICAgICAgICByZXR1cm4gYXV0aG9yLl9pZCAhPT0gaWQ7CiAgICAgIH0pCiAgICB9KTsKICB9LAogIC8vIFRvIGJlIHJlbW92ZWQKICBTT0NLRVRfTUVTU0FHRV9DUkVBVEVEOiBmdW5jdGlvbiBTT0NLRVRfTUVTU0FHRV9DUkVBVEVEKHN0YXRlLCBkYXRhKSB7CiAgICBzdGF0ZS5tZXNzYWdlcy5wdXNoKGRhdGEpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IG5hbWVzcGFjZWQsCiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["C:/Users/asolu/Desktop/MSU_Denver/Spring_2021/Technical_Software_Proj/Granular_Softwar_Solutions/Granular%20Software%20Solutions/client/src/store/modules/messaging.js"],"names":["Vue","authorApi","roomApi","messageApi","messagingApi","namespaced","state","isConnected","connectedRooms","authors","rooms","room","message","messages","getters","actions","clearAuthors","commit","clearRooms","clearRoom","clearMessage","SOCKET_CONNECT","SOCKET_DISCONNECT","createRoom","creationArgs","bind","_vm","$socket","mostRecentMessage","joinRoom","joinRooms","leaveRoom","leaveRooms","leaveAllRooms","getRooms","filters","getAllRooms","length","getRoom","id","getRoomById","updateRoom","updateArgs","updateRoomById","newRoom","archiveRoom","archiveRoomById","deleteRoom","deleteRoomById","SOCKET_ROOM_CREATED","SOCKET_ROOM_JOINED","SOCKET_ROOMS_JOINED","SOCKET_ROOM_LEFT","SOCKET_ROOMS_LEFT","SOCKET_ROOM_UPDATED","_id","SOCKET_ROOM_ARCHIVED","SOCKET_ROOM_DELETED","createMessage","roomId","getMessages","getAllMessages","getMessage","getMessageById","updateMessage","updateMessageById","newMessage","archiveMessage","archiveMessageById","deleteMessage","deleteMessageById","SOCKET_MESSAGE_CREATED","SOCKET_MESSAGE_UPDATED","SOCKET_MESSAGE_ARCHIVED","SOCKET_MESSAGE_DELETED","getAuthors","getAllAuthors","SOCKET_AUTHOR_UPDATED","author","SOCKET_AUTHOR_ARCHIVED","SOCKET_AUTHOR_DELETED","CREATE_MESSAGE","context","messageObj","mutations","setIsConnected","setRooms","addRooms","push","addNewRoom","unshift","removeAndAddUpdatedRoom","oldRoom","filter","shouldReplace","removeRoom","setMostRecentMessage","map","replaceMostRecentMessage","removeMostRecentMessage","setRoom","addConnectedRoom","joinedRoom","addConnectedRooms","joinedRooms","removeConnectedRoom","leftRoom","removeConnectedRooms","leftRooms","includes","setMessages","set","addMessages","addNewMessage","replaceMessage","removeMessage","setMessage","setAuthors","addAuthors","replaceAuthor","newAuthor","archiveAuthor","isArchived","isActive","removeAuthor","data"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport authorApi from '../../api/messaging/authors'\r\nimport roomApi from '../../api/messaging/rooms'\r\nimport messageApi from '../../api/messaging/messages'\r\n\r\n// To be removed\r\nimport messagingApi from '../../api/messaging'\r\n\r\nconst namespaced = true\r\n\r\nconst state = {\r\n    isConnected: false,\r\n    connectedRooms: [],\r\n    authors: [],\r\n    rooms: [],\r\n    room: {},\r\n    message: {},\r\n\r\n    // To be removed\r\n    messages: [], \r\n}\r\n\r\nconst getters = {\r\n    isConnected(state){\r\n        return state.isConnected\r\n    },\r\n\r\n    authors(state){\r\n        return state.authors\r\n    },\r\n    \r\n    rooms(state){\r\n        return state.rooms\r\n    },\r\n    \r\n    room(state){\r\n        return state.room\r\n    },\r\n\r\n    message(state){\r\n        return state.message\r\n    },\r\n\r\n    // To be removed\r\n    messages(state){\r\n        return state.messages\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    // Resets\r\n\r\n    clearAuthors({ commit }){\r\n        commit('clearAuthors')\r\n    },\r\n\r\n    clearRooms({ commit }){\r\n        commit('clearRooms')\r\n    },\r\n\r\n    clearRoom({ commit }){\r\n        commit('clearRoom')\r\n    },\r\n\r\n    clearMessage({ commit }){\r\n        commit('clearMessage')\r\n    },\r\n\r\n    // Incoming system events\r\n\r\n    SOCKET_CONNECT({ commit }){\r\n        commit('setIsConnected', true)\r\n    },\r\n\r\n    SOCKET_DISCONNECT({ commit }){\r\n        commit('setIsConnected', false)\r\n    },\r\n\r\n    // Rooms outgoing requests\r\n\r\n    async createRoom({ commit }, creationArgs){\r\n        const room = await roomApi.createRoom.bind(this._vm.$socket)(creationArgs)\r\n        \r\n        commit('addNewRoom', { ...room, mostRecentMessage: {} })\r\n        commit('setRoom', room)\r\n\r\n        return room\r\n    },\r\n\r\n    joinRoom({ commit }, room){\r\n        roomApi.joinRoom.bind(this._vm.$socket)(room)\r\n    },\r\n\r\n    joinRooms({ commit }, rooms){\r\n        roomApi.joinRooms.bind(this._vm.$socket)(rooms)\r\n    },\r\n\r\n    leaveRoom({ commit }, room){\r\n        roomApi.leaveRoom.bind(this._vm.$socket)(room)\r\n    },\r\n\r\n    leaveRooms({ commit }, rooms){\r\n        roomApi.leaveRooms.bind(this._vm.$socket)(rooms)\r\n    },\r\n\r\n    leaveAllRooms({ state, commit }){\r\n        roomApi.leaveRooms.bind(this._vm.$socket)(state.connectedRooms)\r\n    },\r\n\r\n    async getRooms({ state, commit }, filters){\r\n        const rooms = await roomApi.getAllRooms(filters)\r\n\r\n        if (state.rooms.length > 0){\r\n            commit('addRooms', rooms)\r\n        } else {\r\n            commit('setRooms', rooms)\r\n        }\r\n    },\r\n\r\n    async getRoom({ commit }, id){\r\n        const room = await roomApi.getRoomById(id)\r\n\r\n        commit('setRoom', room)\r\n    },\r\n\r\n    async updateRoom({ commit }, { id, updateArgs }){\r\n        const room = await roomApi.updateRoomById.bind(this._vm.$socket)(id, updateArgs)\r\n\r\n        commit('removeAndAddUpdatedRoom', { id, newRoom: room })\r\n        commit('updateRoom', room)\r\n    },\r\n\r\n    async archiveRoom({ commit }, id){\r\n        const room = await roomApi.archiveRoomById.bind(this._vm.$socket)(id)\r\n\r\n        commit('removeAndAddUpdatedRoom', { id, newRoom: room })\r\n        commit('clearRoom')\r\n    },\r\n\r\n    async deleteRoom({ commit }, id){\r\n        const room = await roomApi.deleteRoomById.bind(this._vm.$socket)(id)\r\n\r\n        commit('removeRoom', id)\r\n        commit('clearRoom')\r\n    },\r\n\r\n    // Rooms incoming responses\r\n\r\n    SOCKET_ROOM_CREATED({ commit }, { room }){\r\n        commit('addNewRoom', { ...room, mostRecentMessage: {} })\r\n    },\r\n\r\n    SOCKET_ROOM_JOINED({ commit }, room){\r\n        commit('addConnectedRoom', room)\r\n    },\r\n\r\n    SOCKET_ROOMS_JOINED({ commit }, rooms){\r\n        commit('addConnectedRooms', rooms)\r\n    },\r\n\r\n    SOCKET_ROOM_LEFT({ commit }, room){\r\n        commit('removeConnectedRoom', room)\r\n    },\r\n\r\n    SOCKET_ROOMS_LEFT({ commit }, rooms){\r\n        commit('removeConnectedRooms', rooms)\r\n    },\r\n\r\n    SOCKET_ROOM_UPDATED({ state, commit }, { room }){\r\n        commit('removeAndAddUpdatedRoom', { id, newRoom: room })\r\n\r\n        if (state.room._id === room._id){\r\n            commit('updateRoom', room)\r\n        }\r\n    },\r\n\r\n    SOCKET_ROOM_ARCHIVED({ commit }, { room }){\r\n        commit('removeAndAddUpdatedRoom', { id, newRoom: room })\r\n\r\n        if (state.room._id === room._id){\r\n            commit('clearRoom')\r\n        }\r\n    },\r\n\r\n    SOCKET_ROOM_DELETED({ commit }, { room }){\r\n        commit('removeRoom', id )\r\n\r\n        if (state.room._id === room._id){\r\n            commit('clearRoom')\r\n        }\r\n    },\r\n    \r\n    // Messages outgoing requests\r\n\r\n    async createMessage({ commit }, creationArgs){\r\n        const message = await messageApi.createMessage.bind(this._vm.$socket)(creationArgs)\r\n\r\n        commit('addNewMessage', message)\r\n        commit('setMostRecentMessage', { id: message.roomId, message })\r\n    },\r\n\r\n    async getMessages({ commit }, filters){\r\n        const messages = await messageApi.getAllMessages(filters)\r\n\r\n        if (!state.room.messages){\r\n            commit('setMessages', messages)\r\n        } else {\r\n            commit('addMessages', messages)\r\n        }\r\n    },\r\n\r\n    async getMessage({ commit }, id){\r\n        const message = await messageApi.getMessageById(id)\r\n\r\n        commit('setMessage', message)\r\n    },\r\n\r\n    async updateMessage({ commit }, { id, updateArgs }){\r\n        const message = await messageApi.updateMessageById.bind(this._vm.$socket)(id, updateArgs)\r\n\r\n        commit('replaceMessage', { id, newMessage: message })\r\n        commit('updateMessage', message)\r\n        commit('setMostRecentMessage', { id: message.roomId, message })\r\n    },\r\n\r\n    async archiveMessage({ commit }, id){\r\n        const message = await messageApi.archiveMessageById.bind(this._vm.$socket)(id)\r\n\r\n        commit('replaceMessage', { id, newMessage: message })\r\n        commit('clearMessage')\r\n    },\r\n\r\n    async deleteMessage({ commit }, id){\r\n        const message = await messageApi.deleteMessageById.bind(this._vm.$socket)(id)\r\n\r\n        commit('removeMessage', id)\r\n        commit('clearMessage')\r\n    },\r\n\r\n    // Messages incoming responses\r\n\r\n    // To be used in new implementation\r\n    SOCKET_MESSAGE_CREATED({ state, commit }, { message }){\r\n        commit('setMostRecentMessage', { id: message.roomId, message})\r\n\r\n        if (state.room._id === message.roomId){\r\n            commit('addNewMessage', message)\r\n        }\r\n    },\r\n\r\n    SOCKET_MESSAGE_UPDATED({ state, commit }, { message }){\r\n        commit('replaceMostRecentMessage', { id: message.roomId, message })\r\n\r\n        if (state.room._id === message.roomId){\r\n            commit('replaceMessage', { id: message.roomId, newMessage: message })\r\n        }\r\n\r\n        if (state.message._id === message._id){\r\n            commit('updateMessage', message)\r\n        }\r\n    },\r\n\r\n    SOCKET_MESSAGE_ARCHIVED({ commit }, { message }){\r\n        commit('replaceMostRecentMessage', { id: message.roomId, message })\r\n\r\n        if (state.room._id === message.roomId){\r\n            commit('replaceMessage', { id: message.roomId, newMessage: message })\r\n        }\r\n\r\n        if (state.message._id === message._id){\r\n            commit('clearMessage')\r\n        }\r\n    },\r\n\r\n    SOCKET_MESSAGE_DELETED({ commit }, { message }){\r\n        commit('removeMostRecentMessage', message.roomId)\r\n\r\n        if (state.room._id === message.roomId){\r\n            commit('removeMessage', message.roomId)\r\n        }\r\n\r\n        if (state.message._id === message._id){\r\n            commit('clearMessage')\r\n        }\r\n    },\r\n\r\n    // Authors outgoing requests\r\n\r\n    async getAuthors({ commit }, filters){\r\n        const authors = await authorApi.getAllAuthors(filters)\r\n\r\n        if (state.authors.length > 0){\r\n            commit('addAuthors', authors)\r\n        } else {\r\n            commit('setAuthors', authors)\r\n        }\r\n    },\r\n    \r\n    // Authors incoming responses\r\n\r\n    SOCKET_AUTHOR_UPDATED({ state, commit }, { author }){\r\n        commit('replaceAuthor', author)\r\n    },\r\n\r\n    SOCKET_AUTHOR_ARCHIVED({ commit }, { author }){\r\n        commit('archiveAuthor', author._id)\r\n    },\r\n\r\n    SOCKET_AUTHOR_DELETED({ commit }, { author }){\r\n        commit('removeAuthor', author._id)\r\n    },\r\n\r\n    // To be removed\r\n    CREATE_MESSAGE(context, messageObj){\r\n        messagingApi.createMessage(this._vm.$socket, messageObj)\r\n    },\r\n}\r\n\r\nconst mutations = {\r\n    // System event mutators\r\n\r\n    setIsConnected(state, isConnected){\r\n        state.isConnected = isConnected\r\n    },\r\n\r\n    // Rooms mutators \r\n    \r\n    clearRooms(state){\r\n        state.rooms = []\r\n    },\r\n\r\n    setRooms(state, rooms){\r\n        state.rooms = rooms\r\n    },\r\n\r\n    addRooms(state, rooms){\r\n        state.rooms.push(...rooms)\r\n    },\r\n\r\n    addNewRoom(state, room){\r\n        state.rooms.unshift(room)\r\n    },\r\n\r\n    removeAndAddUpdatedRoom(state, { id, newRoom }){\r\n        let oldRoom = {}\r\n\r\n        state.rooms = state.rooms.filter(room => {\r\n            const shouldReplace = room.id === id\r\n\r\n            if (shouldReplace) oldRoom = room\r\n            \r\n            return !shouldReplace\r\n        })\r\n\r\n        state.rooms.unshift({ ...oldRoom, ...newRoom })\r\n    },\r\n\r\n    removeRoom(state, id){\r\n        state.rooms = state.rooms.filter(room => room.id !== id)\r\n    },\r\n\r\n    // Rooms Message mutators\r\n\r\n    setMostRecentMessage(state, { id, message }){\r\n        state.rooms = state.rooms.map(room => {\r\n            return room._id === id\r\n                ? { ...room, mostRecentMessage: message }\r\n                : room\r\n        })\r\n    },\r\n\r\n    replaceMostRecentMessage(state, { id, message }){\r\n        state.rooms = state.rooms.map(room => {\r\n            return room._id === id\r\n                ? { ...room, mostRecentMessage: { ...room.mostRecentMessage, ...message } }\r\n                : room\r\n        })\r\n    },\r\n\r\n    removeMostRecentMessage(state, id){\r\n        state.rooms = state.rooms.map(room => {\r\n            return room._id === id\r\n                ? { ...room, mostRecentMessage: {} }\r\n                : room\r\n        })\r\n    },\r\n\r\n    // Room mutators\r\n\r\n    clearRoom(state){\r\n        state.room = {}\r\n    },\r\n\r\n    setRoom(state, room){\r\n        state.room = room\r\n    },\r\n\r\n    updateRoom(state, room){\r\n        state.room = { ...state.room, ...room }\r\n    },\r\n\r\n    // Connected Rooms mutators \r\n    addConnectedRoom(state, joinedRoom){\r\n        state.connectedRooms.push(joinedRoom)\r\n    },\r\n\r\n    addConnectedRooms(state, joinedRooms){\r\n        state.connectedRooms.push(...joinedRooms)\r\n    },\r\n\r\n    removeConnectedRoom(state, leftRoom){\r\n        state.connectedRooms = state.connectedRooms.filter(room => room !== leftRoom )\r\n    },\r\n\r\n    removeConnectedRooms(state, leftRooms){\r\n        state.connectedRooms = state.connectedRooms.filter(room => !leftRooms.includes(room))\r\n    },\r\n\r\n    // Room Messages mutators\r\n\r\n    setMessages(state, messages){\r\n        Vue.set(state.room, 'messages', messages)\r\n    },\r\n\r\n    addMessages(state, messages){\r\n        if (!state.room.messages){\r\n            Vue.set(state.room, 'messages', [])\r\n        }\r\n\r\n        state.room.messages.push(...messages)\r\n    },\r\n\r\n    addNewMessage(state, message){\r\n        if (!state.room.messages){\r\n            Vue.set(state.room, 'messages', [])\r\n        }\r\n\r\n        state.room.messages.unshift(message)\r\n    },\r\n\r\n    replaceMessage(state, { id, newMessage }){\r\n        if (!state.room.messages){\r\n            Vue.set(state.room, 'messages', [])\r\n            state.room.messages.push(newMessage)\r\n        } else {\r\n            state.room.messages = state.room.messages.map(message => {\r\n                return message._id === id\r\n                    ? { ...message, ...newMessage }\r\n                    : message\r\n            })\r\n        }\r\n    },\r\n\r\n    removeMessage(state, id){\r\n        if (!state.room.messages){\r\n            Vue.set(state.room, 'messages', [])\r\n        } else {\r\n            state.room.messages = state.room.messages.filter(message => message.id !== id)\r\n        }\r\n    },\r\n\r\n    // Message mutators\r\n\r\n    clearMessage(state){\r\n        state.message = {}\r\n    },\r\n\r\n    setMessage(state, message){\r\n        state.message = message\r\n    },\r\n\r\n    updateMessage(state, message){\r\n        state.message = { ...state.message, ...message }\r\n    },\r\n\r\n    // Author mutators\r\n\r\n    clearAuthors(state){\r\n        state.authors = []\r\n    },\r\n\r\n    setAuthors(state, authors){\r\n        state.authors = authors\r\n    },\r\n\r\n    addAuthors(state, authors){\r\n        state.authors.push(...authors)\r\n    },\r\n\r\n    replaceAuthor(state, newAuthor){\r\n        state.rooms = state.rooms.map(room => {\r\n            const authors = room.authors.map(author => {\r\n                return author._id === newAuthor._id\r\n                    ? { ...author, ...newAuthor }\r\n                    : author\r\n            })\r\n\r\n            return { ...room, authors }\r\n        })\r\n\r\n        state.room = {\r\n            ...state.room,\r\n            authors: state.room.authors.map(author => {\r\n                return author._id === newAuthor._id\r\n                    ? { ...author, ...newAuthor }\r\n                    : author\r\n            })\r\n        }\r\n    },\r\n\r\n    archiveAuthor(state, id){\r\n        state.rooms = state.rooms.map(room => {\r\n            const authors = room.authors.map(author => {\r\n                return author._id === id\r\n                    ? { ...author, isArchived: true, isActive: false }\r\n                    : author\r\n            })\r\n\r\n            return { ...room, authors }\r\n        })\r\n\r\n        state.room = {\r\n            ...state.room,\r\n            authors: state.room.authors.map(author => {\r\n                return author._id === newAuthor._id\r\n                    ? { ...author, isArchived: true, isActive: false }\r\n                    : author\r\n            })\r\n        }\r\n    },\r\n\r\n    removeAuthor(state, id){\r\n        state.rooms = state.rooms.map(room => {\r\n            const authors = room.authors.filter(author => author._id !== id)\r\n\r\n            return { ...room, authors }\r\n        })\r\n\r\n        state.room = {\r\n            ...state.room,\r\n            authors: state.room.authors.filter(author => author._id !== id)\r\n        }\r\n    },\r\n\r\n    // To be removed\r\n    SOCKET_MESSAGE_CREATED(state, data){\r\n        state.messages.push(data)\r\n    },\r\n}\r\n\r\nexport default {\r\n    namespaced,\r\n    state,\r\n    getters,\r\n    actions,\r\n    mutations,\r\n}"]}]}